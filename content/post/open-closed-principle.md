---
title: "[学习笔记]面向对象设计原则-开闭原则"
date: 2020-04-01T16:32:05+08:00
draft: false
tags: ["学习笔记", "面向对象", "设计原则"]
categories: [""]
---


## 定义
Software entities(modules, classes, functions, etc.) should be open for extention, but closed for modification.

对扩展开放，对修改关闭。

对扩展/修改的划分需要掌握一个度，开闭原则可以应用在不同粒度的代码中，可以是模块、类、方法或属性。同一个代码改动，在粗粒度下看被认为是“修改”，在细粒度下又可以被认为是“扩展”。

只要它没有破坏原有的代码的正常运行，没有破坏原有的单元测试，就可以说这是一个合格的代码改动。

## 如何做到“对扩展开放、对修改关闭”

### 指导思想

开闭原则实际讲的就是代码的扩展性问题。为了写出扩展性好的代码，要时刻具备扩展意识、抽象意识、封装意识。

在开发过程中要思考未来可能有哪些需求变更，如何设计代码结构，事先留好扩展点。

在识别出代码可变部分和不可变部分之后，要将可变部分封装起来，隔离变化，提供抽象化的不可变接口，给上层系统调用。

### 方法

- 多态
- 依赖注入(go里边的struct组合?)
- 基于接口而非实现编程
- 各种设计模式...

## 如何在项目中灵活应用

了解业务，识别扩展点，但不能过度设计。

对于一些比较确定的、短期内可能就会扩展，或者需求改动对代码结构影响比较大的情况，或者实现成本不高的扩展点，在开发的时候可以事先做一些扩展性设计。

但对于一些不确定未来是否要支持的需求，或者实现起来比较复杂的扩展点，可以等到有需求驱动的时候，再通过重构代码的方式来支持扩展的需求。
