---
title: "如何用数据洞察一场直播"
date: 2021-10-07T11:34:55+08:00
draft: false
tags: ["data analysis"]
categories: ["文章迁移", "数据分析"]
---

> 原文链接：https://www.jianshu.com/p/9aee31c3c9e2


## 一  数据
本文以`映客`直播为例，首先是数据抓取，通过websocket方式抓取弹幕信息，数据是长这样的：
```json
{"b":{"ev":"s.m"},"f":0,"dest":3,"userid":83014596,"p":"r","liveid":"1487430423167097","ms":[{"id":33,"tp":"like","cl":[103,195,184]}],"timeStamp":1487430558953}
{"b":{"ev":"s.m"},"f":0,"dest":2,"userid":36238911,"p":"r","liveid":"1487430423167097","ms":[{"tp":"usernu","n":2366}],"timeStamp":1487430559056}
{"b":{"ev":"s.m"},"f":0,"dest":2,"userid":44323100,"p":"r","liveid":"1487430423167097","ms":[{"sys":1,"from":{"rvfr":"","lc":"","vf":0,"nic":"小冲冲少","dsc":"别一直生无可恋的样子，真的辣鸡",
"gd":1,"pf":"1","id":44323100,"lvl":4,"vfr":"","ptr":"MTQ3NDAzOTIwNDE5OSM1NCNqcGc=.jpg","rvf":3},"id":34,"tp":"like","cl":[252,154,81]}],"timeStamp":1487430559094}
{"b":{"ev":"s.m"},"f":0,"dest":2,"userid":64081286,"p":"r","liveid":"1487430423167097","ms":[{"c":"我送了1个爱心","tp":"pub","from":{"rvfr":"","lc":"汕头市","vf":0,"nic":"新店小乖乖","dsc":""
,"gd":1,"pf":"0","id":64081286,"lvl":3,"vfr":"","ptr":"http://img2.inke.cn/MTQ4NzIyMTk0ODAzNyM3NiNqcGc=.jpg","rvf":3},"rcv":8562897,"gift":{"repeat":1,"name":"爱心","gold":1,"cl":[182,149,213
],"type":1,"point":1,"in":17792733,"res_id":171,"id":251,"seq":4}}],"timeStamp":1487430559273}
{"b":{"ev":"s.m"},"f":0,"dest":2,"userid":117195610,"p":"r","liveid":"1487430423167097","ms":[{"c":"我送了1个樱花雨","tp":"pub","from":{"rvfr":"","lc":"青岛市","vf":0,"nic":"小萱－瓷肌娃娃","
dsc":"趁年轻必须要疯狂！","gd":0,"pf":"0","id":117195610,"lvl":6,"vfr":"","ptr":"MTQ3NTQwNzc4MzcxOSMzNjkjanBn.jpg","rvf":3},"rcv":8562897,"gift":{"repeat":1,"name":"樱花雨","gold":1,"cl":[179
,212,101],"type":1,"point":1,"in":17792735,"res_id":69,"id":131,"seq":2}}],"timeStamp":1487430560478}
```

其中原本的数据中没有时间戳，为了做时序分析，在获取到每条信息时加上了timeStamp字段。
统计发现消息类型分为：`bg, usernu, like, iu, jr, sys, pub`这7类。

## 二 对发表评论用户的分析

本次分析选取的直播，时长大约为1小时，主播为女生，直播内容以唱歌、聊天为主。
根据抓到的数据，
点亮数：4786
收到的评论总数为：1795
发表评论的用户数：606

### 2.1 发表评论的前十位

|昵称|评论数|
|:-----:|:--------|
|可儿微l信HH115K🈶	|113|
|蘑菇不是大天才❣️	|43|
|😬头上有天线😬	|39|
|只独宠你一人	|34|
|妹妹VX:nv5221🈶	|28|
|妹子V：yed2255	|27|
|眼不见为净。	|26|
|GiraffeHan🍤	|26|
|魅儿Vx:HKL754🈶	|25|
|妹妹VX:nv5221🈶	|23|

其中的1、5、6、9、10都是在直播间中发送大量广告信息的用户，而且都是不可描述的（你懂的）那方面的广告。

### 2.2 发表评论用户的城市分布排名

![城市分布](/images/comment-user-city.png)

因为主播当时的位置在宁波，所以位于宁波的用户较多。

### 2.3 发表评论用户性别分布

![评论用户性别](/images/comment-user-sex.png)

男女观众比例比较均衡，虽然主播是女生，也有一定量的女性粉丝。

### 2.4 发表评论用户等级分布

![评论用户等级](/images/comment-user-level.png)

可见大部分用户都是初级玩家，有极少量的高级用户，这个规律也符合幂律分布。

## 三 对送礼物用户的分析

收到的礼物总数：1931 
送礼的用户总数：82

### 3.1 送礼用户前十位

|昵称|礼物数|
|:------:|:------:|
|蘑菇不是大天才❣️	|279|
|ZWT	|252|
|Baichenyang_	|200|
|GiraffeHan🍤	|91|
|surperman！	|69|
|园琳	|65|
|King	|64|
|@梓木.	|58|
|🔥蛋挞学长🔥	|55|
|熊当先	|50|

其中`蘑菇不是大天才`非常活跃，实际上是此次直播的房管员，肯定也是主播的铁粉。

### 3.2 送礼用户的城市分布排名

![城市分布](/images/gift-user-city.png)

对比送礼用户与评论用户的地域分布可发现，宁波和上海的用户评论和送礼物都比较积极，而北京的用户就是只评论不送礼物了。

### 3.3 送礼用户性别分布

![送礼用户性别](/images/gift-user-sex.png)

与评论用户的性别分布相一致，说明主播的粉丝中男女比例比较稳定。

### 3.4 送礼用户等级分布

![送礼用户等级](/images/gitf-user-level.png)
同样是初级用户占多数。

## 四 趋势分析

![观众数趋势](/images/audience-count-trend.png)
从观众数趋势中可以看出开播后大概10分钟，观众数就迅速增长到1万8千人左右，并稳定在这个水平一直到直播结束。

![评论与礼物趋势](/images/gift-comment-trend.png)
评论数与礼物数的趋势基本呈现正相关的关系，开播不久有一波礼物小高峰，过程中间有一波评论和礼物的双重高峰，而且评论的峰尖出现在礼物峰尖之前，推测可能是这个时间的内容比较精彩，刺激了用户的积极性。

## 五 评论热词

![hotword](/images/word-cloud.png)
`蘑菇`这个词的词频最高，因为主播的昵称`蘑菇哥哥` 中包含了这个词。其他的热词包括`歌名、唱、嗨、疯`等，说明主播的风格是比较活泼的。 
注意到还有一个词出现的次数较多，就是`口红`这个词，说明观众普遍注意到了主播的口红（如果不是托的话），这可以对美妆领域的广告主提供一些参考，可能是一个潜在的KOL。
